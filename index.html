<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BUNCH mini</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    :root{
      --lime:#b7ff3b;
      --text:#111;
      --muted:#777;
      --line:#eaeaea;
      --bg:#fff;
      --card:#fff;
      --chip:#f2f2f2;
      --radius:16px;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Arial;background:var(--bg);color:var(--text)}
    .app{min-height:100vh;padding-bottom:74px}

    /* top bar */
    .topbar{
      background:var(--lime);
      padding:12px 12px 10px;
      display:grid;
      grid-template-columns: 90px 1fr 44px;
      align-items:center;
      position:sticky;top:0;z-index:10;
    }
    .btn-ghost{background:transparent;border:0;font-size:16px;color:#000}
    .center{text-align:center;line-height:1.1}
    .brand{font-weight:900;letter-spacing:1px}
    .sub{font-size:12px;opacity:.7}

    /* content */
    .content{padding:14px}
    .hidden{display:none}

    /* bottom nav */
    .bottomnav{
      position:fixed;left:0;right:0;bottom:0;
      background:#fff;border-top:1px solid var(--line);
      display:flex;justify-content:space-around;
      padding:10px 6px;
      z-index:20;
    }
    .tab{
      width:25%;
      text-align:center;
      text-decoration:none;
      color:#666;
      font-size:18px;
      display:flex;flex-direction:column;align-items:center;gap:4px;
      padding:4px 0;
    }
    .tab span{font-size:12px}
    .tab.active{color:#000;font-weight:700}

    /* catalog */
    .headline{display:flex;justify-content:space-between;align-items:center;gap:10px;margin-bottom:10px}
    .logo{font-size:34px;font-weight:900}
    .citypill{background:#f1f1f1;border-radius:18px;padding:8px 10px;font-size:14px;white-space:nowrap}

    .chips{display:flex;gap:8px;overflow:auto;padding-bottom:6px}
    .chip{
      border:1px solid #222;background:#fff;border-radius:18px;
      padding:8px 12px;white-space:nowrap;flex:0 0 auto;
      font-size:14px;
    }
    .chip.small{border-color:#ddd;color:#666;padding:6px 10px}
    .chip.on{background:var(--lime);border-color:var(--lime)}

    .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:10px}
    .card{border:1px solid var(--line);border-radius:14px;overflow:hidden;background:#fff}
    .imgwrap{position:relative;aspect-ratio:1/1;background:#eee}
    .imgwrap img{width:100%;height:100%;object-fit:cover;display:block}
    .badge{position:absolute;top:10px;left:10px;background:#dff2ff;color:#0a4a7a;padding:6px 10px;border-radius:14px;font-size:12px;font-weight:700}
    .carticon{position:absolute;right:10px;bottom:10px;width:34px;height:34px;background:rgba(0,0,0,.35);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff}
    .cardbody{padding:10px 10px 12px}
    .title{font-weight:700;margin-bottom:8px}
    .bottom{display:flex;justify-content:space-between;align-items:center}
    .price{font-weight:900}
    .qty{display:flex;align-items:center;gap:10px}
    .qty button{width:28px;height:28px;border-radius:50%;border:1px solid #ddd;background:#fff;font-size:18px;line-height:1}
    .qty button:disabled{opacity:.35}

    /* cart empty */
    .empty{min-height:60vh;display:flex;align-items:center;justify-content:center}
    .panel{width:min(420px,100%);background:#f6f6f6;border-radius:20px;padding:26px;text-align:center}
    .panel .icon{font-size:34px;margin-bottom:12px}
    .panel .h{font-size:22px;font-weight:900;margin-bottom:8px}
    .panel .p{color:#666;margin-bottom:18px}
    .cta{background:var(--lime);border:0;border-radius:18px;padding:14px 16px;font-weight:900;width:70%}

    /* profile */
    .row{display:flex;align-items:center;gap:12px;margin-bottom:14px}
    .avatar{width:52px;height:52px;border-radius:50%;overflow:hidden;background:#eee;display:flex;align-items:center;justify-content:center}
    .avatar img{width:100%;height:100%;object-fit:cover}
    .name{font-size:22px;font-weight:800}
    .box{background:#f6f6f6;border-radius:14px;padding:16px;margin-bottom:14px}
    .box h3{margin:0 0 6px 0;font-size:16px}
    .muted{color:#777}
    .list{display:flex;flex-direction:column;gap:14px;margin:10px 0 26px}
    .item{font-size:18px}
    .bonus{text-align:center;margin-top:10px}
    .bonus h2{margin:0 0 10px 0;font-size:22px}
    .score{font-size:38px;font-weight:900;margin:6px 0}

    /* about */
    .about h1{margin:0 0 10px 0}
    .about p{color:#555;line-height:1.4}
    .bigq{font-weight:900;text-align:center;margin:22px 0 12px;font-size:20px}
    .tile{display:flex;gap:12px;align-items:center;background:#f6f6f6;border-radius:16px;padding:14px;margin-bottom:12px}
    .tile .ic{width:44px;height:44px;border-radius:12px;background:var(--lime);display:flex;align-items:center;justify-content:center;font-size:22px;font-weight:900}
    .tile .t{font-weight:800}
  </style>
</head>
<body>
<div class="app">

  <!-- top bar -->
  <div class="topbar">
    <button class="btn-ghost" id="closeBtn">–ó–∞–∫—Ä—ã—Ç—å</button>
    <div class="center">
      <div class="brand">BUNCH.</div>
      <div class="sub">–º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</div>
    </div>
    <button class="btn-ghost" aria-label="menu">‚ãØ</button>
  </div>

  <div class="content">

    <!-- CATALOG -->
    <section id="page-catalog">
      <div class="headline">
        <div class="logo">BUNCH.</div>
        <div class="citypill">üìç <b>–ì–æ—Ä–æ–¥</b> –ú–æ—Å–∫–≤–∞</div>
      </div>

      <div class="chips" id="cats"></div>
      <div class="chips" style="margin-top:6px" id="tags"></div>

      <div class="grid" id="grid"></div>
    </section>

    <!-- CART -->
    <section id="page-cart" class="hidden">
      <div class="empty" id="cartEmpty">
        <div class="panel">
          <div class="icon">üõçÔ∏è</div>
          <div class="h">–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div>
          <div class="p">–î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π –±–∞–Ω—á, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å –≤–∞—à –¥–µ–Ω—å —è—Ä—á–µ ‚ú®</div>
          <button class="cta" id="goCatalog">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥</button>
        </div>
      </div>
    </section>

    <!-- PROFILE -->
    <section id="page-profile" class="hidden">
      <div class="row">
        <div class="avatar" id="avatar">üôÇ</div>
        <div class="name" id="username">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div>
      </div>

      <div class="box">
        <h3>–ê–∫—Ç–∏–≤–Ω—ã–π –∑–∞–∫–∞–∑</h3>
        <div class="muted">–£ –≤–∞—Å –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤</div>
      </div>

      <div class="list">
        <div class="item">üìç –ê–¥—Ä–µ—Å–∞ –¥–æ—Å—Ç–∞–≤–∫–∏</div>
        <div class="item">üß≥ –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤</div>
        <div class="item">üí¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞</div>
      </div>

      <div class="bonus">
        <h2>–ë–æ–Ω—É—Å–Ω—ã–µ –±–∞–ª–ª—ã</h2>
        <div class="score">500</div>
        <div class="muted">–±–∞–ª–ª–æ–≤</div>
        <div class="muted" style="margin-top:8px">–° –∫–∞–∂–¥–æ–π –ø–æ–∫—É–ø–∫–∏ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ 1% –æ—Ç —Å—É–º–º—ã –∑–∞–∫–∞–∑–∞ –≤ –≤–∏–¥–µ –±–∞–ª–ª–æ–≤</div>
        <div class="muted" style="margin-top:8px">1 –±–∞–ª–ª = 1 —Ä—É–±–ª—å</div>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="page-about" class="hidden about">
      <h1>–û –ø—Ä–æ–µ–∫—Ç–µ Bunch.</h1>
      <p>
        Bunch. ‚Äî —ç—Ç–æ –ø—Ä–æ–µ–∫—Ç –≤ —Å—Ñ–µ—Ä–µ —Ü–≤–µ—Ç–æ—á–Ω–æ–≥–æ —Ä–∏—Ç–µ–π–ª–∞, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç—Ä–µ–º–∏—Ç—Å—è —Å–¥–µ–ª–∞—Ç—å –ø–æ–∫—É–ø–∫—É —Ü–≤–µ—Ç–æ–≤ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —É–¥–æ–±–Ω–æ–π –∏ –¥–æ—Å—Ç—É–ø–Ω–æ–π.
      </p>
      <p><b>–ù–∞—à–∞ –º–∏—Å—Å–∏—è</b><br/>–ú—ã —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç –ø—Ä–æ–¥–∞–∂–∏ —Ü–≤–µ—Ç–æ–≤: —Å–≤–µ–∂–∏–µ —Ü–≤–µ—Ç—ã –ø–æ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Å –±—ã—Å—Ç—Ä–æ–π –¥–æ—Å—Ç–∞–≤–∫–æ–π.</p>

      <div class="bigq">–ß—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è —Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–±–æ—Ä?</div>

      <div class="tile"><div class="ic">üßæ</div><div><div class="t">–°–±–æ—Ä–∫–∞ –Ω–∞ —Å–∫–ª–∞–¥–µ</div><div class="muted">–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è –∑–∞–∫–∞–∑–∞</div></div></div>
      <div class="tile"><div class="ic">üì¶</div><div><div class="t">–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–æ—á–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞</div><div class="muted">–ß—Ç–æ–±—ã –¥–æ–µ—Ö–∞–ª–æ –∂–∏–≤—ã–º</div></div></div>
      <div class="tile"><div class="ic">üè∑Ô∏è</div><div><div class="t">–ù–∞–ª–æ–≥</div><div class="muted">–î–∞, —ç—Ç–æ —Ç–æ–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç</div></div></div>
    </section>

  </div>

  <!-- bottom nav -->
  <nav class="bottomnav">
    <a href="#catalog" class="tab active" id="tab-catalog">‚ò∞<span>–ú–µ–Ω—é</span></a>
    <a href="#cart" class="tab" id="tab-cart">üõí<span>–ö–æ—Ä–∑–∏–Ω–∞</span></a>
    <a href="#profile" class="tab" id="tab-profile">üë§<span>–ü—Ä–æ—Ñ–∏–ª—å</span></a>
    <a href="#about" class="tab" id="tab-about">‚ÑπÔ∏è<span>–û –ø—Ä–æ–µ–∫—Ç–µ</span></a>
  </nav>

</div>

<script>
  // Telegram
  const tg = window.Telegram?.WebApp;
  if (tg) { tg.ready(); tg.expand(); }
  document.getElementById("closeBtn").onclick = () => tg?.close();

  // user on profile
  const user = tg?.initDataUnsafe?.user;
  if (user) {
    document.getElementById("username").textContent =
      [user.first_name, user.last_name].filter(Boolean).join(" ");
    if (user.photo_url) {
      document.getElementById("avatar").innerHTML = `<img src="${user.photo_url}" alt="avatar">`;
    }
  }

  // Data (–ø–æ–∫–∞ –º–æ–∫)
  const CATEGORIES = ["–í—Å–µ","–≠–∫–∑–æ—Ç–∏–∫–∞","–°–µ—Ç—ã","–†–∞–Ω—É–Ω–∫—É–ª—é—Å—ã","–ó–µ–ª–µ–Ω—å","–ì–≤–æ–∑–¥–∏–∫–∏"];
  const TAGS = ["–ë–µ–ª—ã–µ","–ö—Ä–∞—Å–Ω—ã–µ","–ó–µ–ª–µ–Ω—ã–µ","–§–∏–æ–ª–µ—Ç–æ–≤—ã–µ","–†–æ–∑–æ–≤—ã–µ","–ê—Ä–æ–º–∞—Ç–Ω—ã–µ","–ü–∏–æ–Ω–æ–≤–∏–¥–Ω—ã–µ","–°—Ç–æ–π–∫–∏–µ","–í—ã—Å–æ–∫–∏–µ"];

  const PRODUCTS = [
    {id:"amaryllis", title:"–õ—É–∫–æ–≤–∏—Ü–∞ –ê–º–∞—Ä–∏–ª–ª–∏—Å–∞", price:2900, badge:"–î–æ—Å—Ç–∞–≤–∏–º –∑–∞–≤—Ç—Ä–∞", img:"https://picsum.photos/600/600?1", cat:"–≠–∫–∑–æ—Ç–∏–∫–∞", tags:["–†–æ–∑–æ–≤—ã–µ"]},
    {id:"red-bunch", title:"–ö—Ä–∞—Å–Ω–∞—è –æ—Ö–∞–ø–∫–∞", price:8100, badge:"–î–æ—Å—Ç–∞–≤–∏–º –∑–∞–≤—Ç—Ä–∞", img:"https://picsum.photos/600/600?2", cat:"–°–µ—Ç—ã", tags:["–ö—Ä–∞—Å–Ω—ã–µ","–í—ã—Å–æ–∫–∏–µ"]},
    {id:"green-bunch", title:"–ó–µ–ª–µ–Ω–∞—è –æ—Ö–∞–ø–∫–∞", price:4600, badge:"–î–æ—Å—Ç–∞–≤–∏–º –∑–∞–≤—Ç—Ä–∞", img:"https://picsum.photos/600/600?3", cat:"–ó–µ–ª–µ–Ω—å", tags:["–ó–µ–ª–µ–Ω—ã–µ","–°—Ç–æ–π–∫–∏–µ"]},
    {id:"berry-set", title:"–Ø–≥–æ–¥–Ω—ã–π —Å–µ—Ç", price:5200, badge:"–î–æ—Å—Ç–∞–≤–∏–º –∑–∞–≤—Ç—Ä–∞", img:"https://picsum.photos/600/600?4", cat:"–°–µ—Ç—ã", tags:["–§–∏–æ–ª–µ—Ç–æ–≤—ã–µ"]},
  ];

  // Cart state (localStorage)
  const cart = JSON.parse(localStorage.getItem("cart") || "{}");
  const saveCart = () => localStorage.setItem("cart", JSON.stringify(cart));

  // UI helpers
  const $ = (id) => document.getElementById(id);

  function renderChips() {
    $("cats").innerHTML = CATEGORIES.map(c =>
      `<button class="chip ${state.cat===c ? "on":""}" data-cat="${c}">${c}</button>`
    ).join("");

    $("tags").innerHTML = TAGS.map(t =>
      `<button class="chip small ${state.tag===t ? "on":""}" data-tag="${t}">${t}</button>`
    ).join("");

    $("cats").onclick = (e) => {
      const b = e.target.closest("button"); if(!b) return;
      state.cat = b.dataset.cat;
      render();
    };
    $("tags").onclick = (e) => {
      const b = e.target.closest("button"); if(!b) return;
      state.tag = (state.tag === b.dataset.tag) ? null : b.dataset.tag;
      render();
    };
  }

  function qtyOf(id){ return cart[id] || 0; }

  function renderGrid() {
    const list = PRODUCTS.filter(p => {
      const okCat = state.cat === "–í—Å–µ" || p.cat === state.cat;
      const okTag = !state.tag || p.tags.includes(state.tag);
      return okCat && okTag;
    });

    $("grid").innerHTML = list.map(p => `
      <div class="card">
        <div class="imgwrap">
          <div class="badge">${p.badge}</div>
          <img src="${p.img}" alt="">
          <div class="carticon">üõçÔ∏è</div>
        </div>
        <div class="cardbody">
          <div class="title">${p.title}</div>
          <div class="bottom">
            <div class="price">${p.price.toLocaleString("ru-RU")} ‚ÇΩ</div>
            <div class="qty">
              <button data-dec="${p.id}" ${qtyOf(p.id)===0 ? "disabled":""}>‚Äì</button>
              <span>${qtyOf(p.id)}</span>
              <button data-inc="${p.id}">+</button>
            </div>
          </div>
        </div>
      </div>
    `).join("");

    $("grid").onclick = (e) => {
      const inc = e.target.closest("button")?.dataset?.inc;
      const dec = e.target.closest("button")?.dataset?.dec;
      if (inc) { cart[inc] = (cart[inc]||0)+1; saveCart(); render(); }
      if (dec) {
        cart[dec] = (cart[dec]||0)-1;
        if (cart[dec] <= 0) delete cart[dec];
        saveCart(); render();
      }
    };
  }

  function renderCart() {
    const empty = Object.keys(cart).length === 0;
    $("cartEmpty").style.display = empty ? "flex" : "none";
  }

  // Navigation
  const pages = {
    catalog: $("page-catalog"),
    cart: $("page-cart"),
    profile: $("page-profile"),
    about: $("page-about")
  };
  const tabs = {
    catalog: $("tab-catalog"),
    cart: $("tab-cart"),
    profile: $("tab-profile"),
    about: $("tab-about")
  };

  function showPage(name){
    Object.keys(pages).forEach(k => pages[k].classList.toggle("hidden", k!==name));
    Object.keys(tabs).forEach(k => tabs[k].classList.toggle("active", k===name));
    location.hash = name;
  }

  $("goCatalog").onclick = () => showPage("catalog");

  // state
  const state = { cat:"–í—Å–µ", tag:null };

  function render(){
    renderChips();
    renderGrid();
    renderCart();
  }

  // initial
  const start = (location.hash || "#catalog").replace("#","");
  showPage(["catalog","cart","profile","about"].includes(start) ? start : "catalog");
  render();
</script>
</body>
</html>
